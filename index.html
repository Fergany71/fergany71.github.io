<!DOCTYPE html>
<html lang="ar" dir="rtl" class="light">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Ø¹Ù…Ø± Ø¹Ø·ÙŠÙ‡ Ø§Ù„ÙØ±Ø¬Ø§Ù†Ù‰ | Ù…Ø·ÙˆØ± ÙˆÙ…Ø¨ØªÙƒØ± ÙˆÙŠØ¨</title>
   
   <script src="https://cdn.tailwindcss.com"></script>
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Amiri:wght@400;700&family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
   <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

   <style>
       :root {
           --bg-color: #f3f4f6; --bg-secondary-color: #ffffff; --text-color: #1f2937;
           --text-secondary-color: #4b5563; --primary-color: #0d9488; --primary-hover-color: #0f766e;
           --border-color: #d1d5db;
       }
       html.dark {
           --bg-color: #111827; --bg-secondary-color: #1f2937; --text-color: #f9fafb;
           --text-secondary-color: #9ca3af; --border-color: #4b5563;
       }
       /* Base styles */
       body { font-family: 'Cairo', sans-serif; background-color: var(--bg-color); color: var(--text-color); transition: background-color 0.3s, color 0.3s; overflow-x: hidden;}
       .text-primary { color: var(--primary-color); } .bg-primary { background-color: var(--primary-color); }
       .bg-secondary { background-color: var(--bg-secondary-color); }
       
       /* --- SMART & PROFESSIONAL PRELOADER --- */
       #preloader {
           position: fixed; top: 0; left: 0; width: 100%; height: 100%;
           background: linear-gradient(135deg, var(--bg-color) 0%, var(--bg-secondary-color) 100%);
           z-index: 10000;
           display: flex; align-items: center; justify-content: center;
           opacity: 1; visibility: visible;
           transition: opacity 1s ease-in-out, visibility 1s ease-in-out;
           overflow: hidden;
       }
       #preloader.loaded {
           opacity: 0; visibility: hidden; pointer-events: none;
       }
       
       /* Animated Background Particles */
       .preloader-particles {
           position: absolute;
           top: 0; left: 0; width: 100%; height: 100%;
           overflow: hidden;
           z-index: 1;
       }
       .particle {
           position: absolute;
           background: var(--primary-color);
           border-radius: 50%;
           opacity: 0.1;
           animation: float 6s infinite ease-in-out;
       }
       @keyframes float {
           0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.1; }
           50% { transform: translateY(-20px) rotate(180deg); opacity: 0.3; }
       }
       
       .preloader-content {
           text-align: center;
           z-index: 2;
           position: relative;
           max-width: 90%;
       }
       
       /* Smart Loading Animation */
       .preloader-logo {
           width: 80px; height: 80px;
           margin: 0 auto 30px;
           border: 3px solid transparent;
           border-top: 3px solid var(--primary-color);
           border-radius: 50%;
           animation: spin 2s linear infinite;
           position: relative;
           display: flex;
           align-items: center;
           justify-content: center;
       }
       .preloader-logo::before {
           content: '';
           width: 40px; height: 40px;
           border: 2px solid transparent;
           border-top: 2px solid var(--primary-hover-color);
           border-radius: 50%;
           animation: spin 1.5s linear infinite reverse;
       }
       @keyframes spin {
           0% { transform: rotate(0deg); }
           100% { transform: rotate(360deg); }
       }
       
       .preloader-welcome-text {
           font-size: clamp(1.8rem, 5vw, 3rem);
           font-weight: 900;
           background: linear-gradient(45deg, var(--primary-color), var(--primary-hover-color), var(--primary-color));
           background-size: 200% 200%;
           background-clip: text;
           -webkit-background-clip: text;
           -webkit-text-fill-color: transparent;
           line-height: 1.2;
           overflow: hidden;
           position: relative;
           animation: gradient-shift 3s ease-in-out infinite;
           margin-bottom: 20px;
           /* MODIFICATION: Initial state for animation */
           opacity: 0;
           transform: translateY(30px);
       }
       @keyframes gradient-shift {
           0%, 100% { background-position: 0% 50%; }
           50% { background-position: 100% 50%; }
       }
       
       /* REMOVED: .char styles are no longer needed */
       
       /* Progress Bar */
       .preloader-progress {
           width: 300px;
           max-width: 80%;
           height: 4px;
           background: rgba(13, 148, 136, 0.2);
           border-radius: 2px;
           margin: 20px auto;
           overflow: hidden;
           position: relative;
       }
       .preloader-progress-bar {
           height: 100%;
           background: linear-gradient(90deg, var(--primary-color), var(--primary-hover-color));
           border-radius: 2px;
           width: 0%;
           transition: width 0.3s ease;
           position: relative;
       }
       .preloader-progress-bar::after {
           content: '';
           position: absolute;
           top: 0; left: 0;
           height: 100%; width: 100%;
           background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
           animation: shimmer 2s infinite;
       }
       @keyframes shimmer {
           0% { transform: translateX(-100%); }
           100% { transform: translateX(100%); }
       }
       
       /* Loading Text */
       .preloader-status {
           font-size: 1rem;
           color: var(--text-secondary-color);
           margin-top: 15px;
           opacity: 0.8;
           animation: pulse 2s infinite;
       }
       @keyframes pulse {
           0%, 100% { opacity: 0.8; }
           50% { opacity: 1; }
       }
       
       /* Scrollbar */
       #scroll-progress-bar { position: fixed; top: 0; right: 0; height: 3px; background-color: var(--primary-color); width: 0%; z-index: 100; }
       
       /* Header */
       .nav-active { color: var(--primary-color) !important; font-weight: 700; }

       /* --- PROFESSIONAL LOGO STYLES --- */
       .professional-name {
           font-family: 'Amiri', serif;
           font-size: clamp(1.2rem, 3vw, 1.8rem);
           font-weight: 700;
           background: linear-gradient(45deg, var(--primary-color), var(--primary-hover-color), #0891b2, var(--primary-color));
           background-size: 300% 300%;
           background-clip: text;
           -webkit-background-clip: text;
           -webkit-text-fill-color: transparent;
           animation: gradient-flow 4s ease-in-out infinite, slide-in-right 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
           position: relative;
           overflow: hidden;
           text-shadow: 0 2px 4px rgba(13, 148, 136, 0.3);
           letter-spacing: 1px;
       }

       .professional-name::before {
           content: '';
           position: absolute;
           top: 0;
           left: -100%;
           width: 100%;
           height: 100%;
           background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
           animation: shine-text 3s infinite;
       }

       @keyframes gradient-flow {
           0%, 100% { background-position: 0% 50%; }
           50% { background-position: 100% 50%; }
       }

       @keyframes slide-in-right {
           0% { 
               transform: translateX(100px);
               opacity: 0;
           }
           100% { 
               transform: translateX(0);
               opacity: 1;
           }
       }

       @keyframes shine-text {
           0% { left: -100%; }
           100% { left: 100%; }
       }

       .professional-name:hover {
           animation-play-state: paused;
           transform: scale(1.05);
           transition: transform 0.3s ease;
       }

       /* Theme Toggle Switch */
       .theme-switch-wrapper { display: flex; align-items: center; }
       .theme-switch { display: inline-block; height: 24px; position: relative; width: 44px; }
       .theme-switch input { display:none; }
       .slider { background-color: #ccc; bottom: 0; cursor: pointer; left: 0; position: absolute; right: 0; top: 0; transition: .4s; border-radius: 24px; }
       .slider:before { background-color: #fff; bottom: 4px; content: ""; height: 16px; left: 4px; position: absolute; transition: .4s; width: 16px; border-radius: 50%; }
       input:checked + .slider { background-color: var(--primary-color); }
       input:checked + .slider:before { transform: translateX(20px); }
       .slider .fa-moon, .slider .fa-sun { position: absolute; top: 5px; color: #fff; font-size: 14px; transition: opacity 0.4s; }
       .slider .fa-moon { left: 5px; opacity: 0; }
       .slider .fa-sun { right: 5px; opacity: 1; }
       input:checked + .slider .fa-moon { opacity: 1; }
       input:checked + .slider .fa-sun { opacity: 0; }
       
       /* Hero section and background */
       #bg-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
       #hero > div { z-index: 2; position: relative; }

       /* Word Reveal Animation */
       .g-title { display: block; overflow: hidden;}
       .g-title .word { transform: translateY(115%); transition: transform .5s; display: inline-block; padding-left: 4px;}

       /* Enhanced About Section Styles */
       .about-card {
           background: var(--bg-secondary-color);
           border-radius: 20px;
           padding: 2rem;
           box-shadow: 0 10px 30px rgba(0,0,0,0.1);
           border: 1px solid var(--border-color);
           transition: all 0.3s ease;
           position: relative;
           overflow: hidden;
       }

       .about-card::before {
           content: '';
           position: absolute;
           top: 0;
           left: -100%;
           width: 100%;
           height: 100%;
           background: linear-gradient(90deg, transparent, rgba(13, 148, 136, 0.1), transparent);
           transition: left 0.5s ease;
       }

       .about-card:hover::before {
           left: 100%;
       }

       .about-card:hover {
           transform: translateY(-5px);
           box-shadow: 0 20px 40px rgba(13, 148, 136, 0.2);
       }

       .skill-tag {
           display: inline-block;
           background: linear-gradient(135deg, var(--primary-color), var(--primary-hover-color));
           color: white;
           padding: 0.5rem 1rem;
           border-radius: 25px;
           font-size: 0.9rem;
           font-weight: 600;
           margin: 0.25rem;
           transition: all 0.3s ease;
           position: relative;
           overflow: hidden;
       }

       .skill-tag::before {
           content: '';
           position: absolute;
           top: 0;
           left: -100%;
           width: 100%;
           height: 100%;
           background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
           transition: left 0.3s ease;
       }

       .skill-tag:hover::before {
           left: 100%;
       }

       .skill-tag:hover {
           transform: scale(1.05);
           box-shadow: 0 5px 15px rgba(13, 148, 136, 0.4);
       }

       .achievement-item {
           display: flex;
           align-items: center;
           gap: 1rem;
           padding: 1rem;
           background: var(--bg-color);
           border-radius: 15px;
           margin-bottom: 1rem;
           transition: all 0.3s ease;
           border-left: 4px solid var(--primary-color);
       }

       .achievement-item:hover {
           transform: translateX(-5px);
           box-shadow: 0 5px 15px rgba(13, 148, 136, 0.2);
       }

       .achievement-icon {
           width: 50px;
           height: 50px;
           background: linear-gradient(135deg, var(--primary-color), var(--primary-hover-color));
           border-radius: 50%;
           display: flex;
           align-items: center;
           justify-content: center;
           color: white;
           font-size: 1.2rem;
           flex-shrink: 0;
       }

       /* --- SMART & PROFESSIONAL CHATBOT --- */
       #chat-widget { 
           position: fixed; 
           bottom: 20px; 
           right: 20px; 
           z-index: 1000; 
           font-family: 'Cairo', sans-serif;
       }
       
       /* Enhanced Chat Bubble */
       #chat-bubble { 
           width: 70px; 
           height: 70px; 
           background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-hover-color) 50%, var(--primary-color) 100%);
           background-size: 200% 200%;
           border-radius: 50%; 
           display: flex; 
           align-items: center; 
           justify-content: center; 
           cursor: pointer; 
           box-shadow: 0 8px 25px rgba(13, 148, 136, 0.4), 0 0 0 0 rgba(13, 148, 136, 0.7);
           animation: bubble-pulse 3s infinite, gradient-rotate 4s ease-in-out infinite;
           transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
           position: relative;
           overflow: hidden;
       }
       
       #chat-bubble::before {
           content: '';
           position: absolute;
           top: -50%;
           left: -50%;
           width: 200%;
           height: 200%;
           background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
           transform: rotate(45deg);
           animation: shine 3s infinite;
       }
       
       #chat-bubble:hover { 
           transform: scale(1.1) rotate(5deg); 
           animation-play-state: paused; 
           box-shadow: 0 12px 35px rgba(13, 148, 136, 0.6), 0 0 0 10px rgba(13, 148, 136, 0.1);
       }
       
       @keyframes bubble-pulse { 
           0%, 100% { transform: scale(1); box-shadow: 0 8px 25px rgba(13, 148, 136, 0.4), 0 0 0 0 rgba(13, 148, 136, 0.7); } 
           50% { transform: scale(1.05); box-shadow: 0 8px 25px rgba(13, 148, 136, 0.4), 0 0 0 15px rgba(13, 148, 136, 0.2); } 
       }
       
       @keyframes gradient-rotate {
           0%, 100% { background-position: 0% 50%; }
           50% { background-position: 100% 50%; }
       }
       
       @keyframes shine {
           0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
           50% { transform: translateX(100%) translateY(100%) rotate(45deg); }
           100% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
       }
       
       /* Enhanced AI Icon */
       .ai-icon-container {
           width: 40px; 
           height: 40px; 
           position: relative;
           z-index: 2;
       }
       
       .ai-brain {
           width: 100%;
           height: 100%;
           position: relative;
           animation: brain-pulse 2s infinite ease-in-out;
       }
       
       .ai-brain::before {
           content: 'ğŸ§ ';
           font-size: 24px;
           position: absolute;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%);
           filter: brightness(0) invert(1);
       }
       
       .neural-network {
           position: absolute;
           width: 100%;
           height: 100%;
           top: 0;
           left: 0;
       }
       
       .neural-dot {
           position: absolute;
           width: 4px;
           height: 4px;
           background: white;
           border-radius: 50%;
           animation: neural-pulse 1.5s infinite ease-in-out;
       }
       
       .neural-dot:nth-child(1) { top: 20%; left: 20%; animation-delay: 0s; }
       .neural-dot:nth-child(2) { top: 20%; right: 20%; animation-delay: 0.2s; }
       .neural-dot:nth-child(3) { bottom: 20%; left: 20%; animation-delay: 0.4s; }
       .neural-dot:nth-child(4) { bottom: 20%; right: 20%; animation-delay: 0.6s; }
       .neural-dot:nth-child(5) { top: 50%; left: 50%; animation-delay: 0.8s; transform: translate(-50%, -50%); }
       
       @keyframes brain-pulse {
           0%, 100% { transform: scale(1); }
           50% { transform: scale(1.1); }
       }
       
       @keyframes neural-pulse {
           0%, 100% { opacity: 0.3; transform: scale(0.8); }
           50% { opacity: 1; transform: scale(1.2); }
       }
       
       /* Enhanced Chat Window */
       #chat-window { 
           position: absolute; 
           bottom: 90px; 
           right: 0; 
           width: 380px; 
           max-width: 90vw; 
           height: 550px; 
           max-height: 75vh; 
           background: var(--bg-secondary-color);
           backdrop-filter: blur(20px);
           border: 1px solid var(--border-color); 
           border-radius: 20px; 
           box-shadow: 0 20px 60px rgba(0,0,0,0.15), 0 0 0 1px rgba(255,255,255,0.1);
           display: flex; 
           flex-direction: column; 
           overflow: hidden; 
           transform-origin: bottom right; 
           transform: scale(0.3) translateY(20px); 
           opacity: 0; 
           pointer-events: none; 
           transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
       }
       
       #chat-window.open { 
           transform: scale(1) translateY(0); 
           opacity: 1; 
           pointer-events: auto; 
       }
       
       /* Chat Header */
       .chat-header {
           padding: 20px;
           background: linear-gradient(135deg, var(--primary-color), var(--primary-hover-color));
           color: white;
           border-radius: 20px 20px 0 0;
           position: relative;
           overflow: hidden;
       }
       
       .chat-header::before {
           content: '';
           position: absolute;
           top: 0;
           left: -100%;
           width: 100%;
           height: 100%;
           background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
           animation: header-shine 3s infinite;
       }
       
       @keyframes header-shine {
           0% { left: -100%; }
           100% { left: 100%; }
       }
       
       .chat-header h3 {
           margin: 0;
           font-size: 1.2rem;
           font-weight: 700;
           display: flex;
           align-items: center;
           gap: 10px;
           position: relative;
           z-index: 1;
       }
       
       .chat-status {
           font-size: 0.85rem;
           opacity: 0.9;
           margin-top: 5px;
           display: flex;
           align-items: center;
           gap: 8px;
           position: relative;
           z-index: 1;
       }
       
       .status-indicator {
           width: 8px;
           height: 8px;
           background: #4ade80;
           border-radius: 50%;
           animation: status-blink 2s infinite;
       }
       
       @keyframes status-blink {
           0%, 100% { opacity: 1; }
           50% { opacity: 0.5; }
       }
       
       /* Enhanced Messages */
       #chat-messages { 
           flex-grow: 1; 
           padding: 20px; 
           overflow-y: auto; 
           display: flex; 
           flex-direction: column; 
           gap: 15px;
           background: var(--bg-color);
       }
       
       .message { 
           padding: 12px 18px; 
           border-radius: 20px; 
           max-width: 85%; 
           line-height: 1.6;
           position: relative;
           animation: message-appear 0.3s ease-out;
       }
       
       @keyframes message-appear {
           from { opacity: 0; transform: translateY(10px); }
           to { opacity: 1; transform: translateY(0); }
       }
       
       .message.user { 
           background: linear-gradient(135deg, var(--primary-color), var(--primary-hover-color));
           color: white; 
           align-self: flex-start; 
           border-bottom-left-radius: 5px;
           box-shadow: 0 4px 12px rgba(13, 148, 136, 0.3);
       }
       
       .message.ai { 
           background: var(--bg-secondary-color);
           border: 1px solid var(--border-color);
           align-self: flex-end; 
           border-bottom-right-radius: 5px; 
           display: flex; 
           align-items: flex-start; 
           gap: 12px;
           box-shadow: 0 2px 8px rgba(0,0,0,0.1);
       }
       
       .message.ai .ai-avatar {
           width: 32px; 
           height: 32px; 
           border-radius: 50%;
           background: linear-gradient(135deg, var(--primary-color), var(--primary-hover-color));
           display: flex;
           align-items: center;
           justify-content: center;
           color: white;
           font-size: 14px;
           flex-shrink: 0;
           margin-top: 2px;
       }
       
       .message.ai p, .message.ai ul, .message.ai ol { margin-bottom: 0.5rem; }
       .message.ai ul { padding-right: 1.2rem; list-style-type: 'âœ… '; }
       .message.ai ol { padding-right: 1.2rem; }
       .message.ai strong { color: var(--primary-color); }
       .message.ai code { 
           background-color: rgba(13, 148, 136, 0.1); 
           padding: 3px 8px; 
           border-radius: 6px; 
           font-family: 'Courier New', monospace;
           font-size: 0.9em;
       }
       
       /* Enhanced Quick Replies */
       #chat-quick-replies { 
           padding: 10px 20px 15px; 
           display: flex; 
           flex-wrap: wrap; 
           gap: 10px;
           background: var(--bg-color);
       }
       
       .quick-reply-btn { 
           background: transparent; 
           border: 2px solid var(--primary-color); 
           color: var(--primary-color); 
           padding: 8px 16px; 
           font-size: 0.85rem; 
           border-radius: 20px; 
           cursor: pointer; 
           transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
           font-weight: 600;
           position: relative;
           overflow: hidden;
       }
       
       .quick-reply-btn::before {
           content: '';
           position: absolute;
           top: 0;
           left: -100%;
           width: 100%;
           height: 100%;
           background: var(--primary-color);
           transition: left 0.3s ease;
           z-index: -1;
       }
       
       .quick-reply-btn:hover {
           color: white;
           transform: translateY(-2px);
           box-shadow: 0 4px 12px rgba(13, 148, 136, 0.3);
       }
       
       .quick-reply-btn:hover::before {
           left: 0;
       }
       
       /* Enhanced Input Area */
       #chat-input-wrapper { 
           display: flex; 
           align-items: center; 
           padding: 15px 20px; 
           border-top: 1px solid var(--border-color);
           background: var(--bg-secondary-color);
           border-radius: 0 0 20px 20px;
       }
       
       #chat-input { 
           flex-grow: 1; 
           border: 2px solid var(--border-color); 
           background: var(--bg-color);
           padding: 12px 16px; 
           color: var(--text-color); 
           outline: none;
           border-radius: 25px;
           font-size: 0.95rem;
           transition: all 0.3s ease;
           margin-left: 10px;
       }
       
       #chat-input:focus {
           border-color: var(--primary-color);
           box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
       }
       
       #chat-send-btn { 
           background: linear-gradient(135deg, var(--primary-color), var(--primary-hover-color));
           color: white; 
           border: none; 
           border-radius: 50%; 
           width: 45px; 
           height: 45px; 
           font-size: 1.2rem; 
           cursor: pointer; 
           display: flex; 
           align-items: center; 
           justify-content: center;
           transition: all 0.3s ease;
           box-shadow: 0 4px 12px rgba(13, 148, 136, 0.3);
       }
       
       #chat-send-btn:hover {
           transform: scale(1.1);
           box-shadow: 0 6px 16px rgba(13, 148, 136, 0.4);
       }
       
       #chat-send-btn:active {
           transform: scale(0.95);
       }
   </style>
</head>
<body>
   <div id="scroll-progress-bar"></div>
   
   <!-- Smart & Professional Preloader -->
   <div id="preloader">
       <div class="preloader-particles" id="preloader-particles"></div>
       <div class="preloader-content">
           <div class="preloader-logo"></div>
           <h1 id="preloader-text" class="preloader-welcome-text"></h1>
           <div class="preloader-progress">
               <div class="preloader-progress-bar" id="preloader-progress-bar"></div>
           </div>
           <div class="preloader-status" id="preloader-status">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
       </div>
   </div>

   <header class="bg-secondary/80 backdrop-blur-sm shadow-md fixed top-0 left-0 right-0 z-50">
       <div class="container mx-auto px-4 sm:px-6 py-3 flex justify-between items-center">
           <div class="flex items-center gap-4">
               <a href="#hero" class="logo-container flex items-center gap-4" style="text-decoration: none;">
                   <span class="professional-name">Ø¹Ù…Ø± Ø¹Ø·ÙŠÙ‡ Ø§Ù„ÙØ±Ø¬Ø§Ù†Ù‰</span>
               </a>
           </div>
           
           <nav id="main-nav" class="hidden lg:flex items-center space-x-6 space-x-reverse text-text-color">
               <a href="#hero" class="nav-link hover:text-primary transition-colors">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
               <a href="#about" class="nav-link hover:text-primary transition-colors">Ø¹Ù†ÙŠ</a>
               <a href="#services" class="nav-link hover:text-primary transition-colors">Ø®Ø¯Ù…Ø§ØªÙŠ</a>
               <a href="#contact" class="nav-link hover:text-primary transition-colors">ØªÙˆØ§ØµÙ„</a>
           </nav>
           
           <div class="flex items-center space-x-3 space-x-reverse">
                <div class="theme-switch-wrapper">
                   <label class="theme-switch" for="theme-checkbox">
                       <input type="checkbox" id="theme-checkbox" />
                       <div class="slider">
                           <i class="fas fa-moon"></i><i class="fas fa-sun"></i>
                       </div>
                   </label>
                </div>
                <a href="#contact" class="hidden md:block bg-primary text-white font-bold text-sm py-2 px-4 rounded-full hover:bg-primary-hover transition-all transform hover:scale-105">Ø§Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©</a>
                <button id="mobile-menu-button" class="lg:hidden text-2xl text-text-color"><i class="fas fa-bars"></i></button>
           </div>
       </div>
       <div id="mobile-menu" class="hidden lg:hidden bg-secondary/95 backdrop-blur-sm p-4">
           <div class="flex justify-between items-center mb-4 text-sm text-text-secondary-color">
               <a href="#contact" class="nav-link-mobile bg-primary text-white font-bold text-sm py-2 px-4 rounded-full">Ø§Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©</a>
           </div>
           <a href="#hero" class="nav-link-mobile block text-center py-3 text-lg hover:bg-primary hover:text-white rounded-lg">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
           <a href="#about" class="nav-link-mobile block text-center py-3 text-lg hover:bg-primary hover:text-white rounded-lg">Ø¹Ù†ÙŠ</a>
           <a href="#services" class="nav-link-mobile block text-center py-3 text-lg hover:bg-primary hover:text-white rounded-lg">Ø®Ø¯Ù…Ø§ØªÙŠ</a>
           <a href="#contact" class="nav-link-mobile block text-center py-3 text-lg hover:bg-primary hover:text-white rounded-lg">ØªÙˆØ§ØµÙ„</a>
       </div>
   </header>

   <main>
       <section id="hero" class="min-h-screen flex items-center bg-secondary relative overflow-hidden">
           <canvas id="bg-canvas"></canvas>
           <div class="container mx-auto px-6 text-center">
               <h1 class="text-4xl md:text-7xl font-black leading-tight reveal">Ø£Ù†Ø§ <span class="text-primary">Ø¹Ù…Ø± Ø¹Ø·ÙŠÙ‡ Ø§Ù„ÙØ±Ø¬Ø§Ù†Ù‰</span></h1>
               <p class="text-xl md:text-3xl mt-4 text-text-secondary-color reveal" data-delay="0.2">Ø£ÙØ­ÙˆÙ‘Ù„ Ø§Ù„Ø£ÙÙƒØ§Ø± Ø¥Ù„Ù‰ ØªØ¬Ø§Ø±Ø¨ Ø±Ù‚Ù…ÙŠØ© Ù…Ø¨ØªÙƒØ±Ø©.</p>
           </div>
       </section>

       <section id="about" class="py-24 bg-color">
            <div class="container mx-auto px-6">
               <div class="text-center mb-16"> 
                   <h2 class="text-4xl font-bold g-title" data-text="Ø´ØºÙØŒ ÙƒÙˆØ¯ØŒ ÙˆØ¥Ø¨Ø¯Ø§Ø¹"></h2> 
               </div>
               
               <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
                   <!-- Personal Info Card -->
                   <div class="about-card reveal">
                       <div class="flex items-center gap-4 mb-6">
                           <div class="achievement-icon">
                               <i class="fas fa-user"></i>
                           </div>
                           <h3 class="text-2xl font-bold text-primary">Ù…Ù† Ø£Ù†Ø§ØŸ</h3>
                       </div>
                       <p class="text-lg leading-relaxed mb-6">
                           Ø§Ø³Ù…ÙŠ <strong class="text-primary">Ø¹Ù…Ø± Ø¹Ø·ÙŠÙ‡ Ø§Ù„ÙØ±Ø¬Ø§Ù†Ù‰</strong>ØŒ Ø¹Ù†Ø¯ÙŠ 17 Ø³Ù†Ø© ÙˆØ·Ø§Ù„Ø¨ ÙÙŠ ØªØ§Ù„ØªØ© Ø«Ø§Ù†ÙˆÙŠ. 
                           Ø§ØªÙˆÙ„Ø¯Øª ÙÙŠ 30 Ù…Ø§ÙŠÙˆ 2008 ÙÙŠ Ù‚Ø±ÙŠØ© Ø§Ù„Ù…Ù„Ø§Ùƒ Ø¨Ø¹Ø²Ø¨Ø© Ø§Ù„ÙØ±Ø¬Ø§Ù†Ù‰. 
                           Ù…Ù† ØµØºØ±ÙŠ ÙˆØ£Ù†Ø§ Ù…ÙØªÙˆÙ† Ø¨Ø¹Ø§Ù„Ù… Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ ÙˆØ¨Ø­Ø¨ Ø£Ø­ÙˆÙ„ Ø§Ù„Ø£ÙÙƒØ§Ø± Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø© Ù„Ø­Ù„ÙˆÙ„ Ø±Ù‚Ù…ÙŠØ© Ø¨Ø³ÙŠØ·Ø© ÙˆÙØ¹Ø§Ù„Ø©.
                       </p>
                       
                       <div class="achievement-item">
                           <div class="achievement-icon">
                               <i class="fas fa-birthday-cake"></i>
                           </div>
                           <div>
                               <h4 class="font-bold">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</h4>
                               <p class="text-text-secondary-color">30 Ù…Ø§ÙŠÙˆ 2008</p>
                           </div>
                       </div>
                       
                       <div class="achievement-item">
                           <div class="achievement-icon">
                               <i class="fas fa-map-marker-alt"></i>
                           </div>
                           <div>
                               <h4 class="font-bold">Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</h4>
                               <p class="text-text-secondary-color">Ù‚Ø±ÙŠØ© Ø§Ù„Ù…Ù„Ø§Ùƒ - Ø¹Ø²Ø¨Ø© Ø§Ù„ÙØ±Ø¬Ø§Ù†Ù‰</p>
                           </div>
                       </div>
                       
                       <div class="achievement-item">
                           <div class="achievement-icon">
                               <i class="fas fa-graduation-cap"></i>
                           </div>
                           <div>
                               <h4 class="font-bold">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</h4>
                               <p class="text-text-secondary-color">Ø·Ø§Ù„Ø¨ ÙÙŠ Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ</p>
                           </div>
                       </div>
                   </div>

                   <!-- Skills & Passion Card -->
                   <div class="about-card reveal" data-delay="0.2">
                       <div class="flex items-center gap-4 mb-6">
                           <div class="achievement-icon">
                               <i class="fas fa-code"></i>
                           </div>
                           <h3 class="text-2xl font-bold text-primary">Ø´ØºÙÙŠ ÙˆÙ…Ù‡Ø§Ø±Ø§ØªÙŠ</h3>
                       </div>
                       <p class="text-lg leading-relaxed mb-6">
                           Ø¨Ø­Ø¨ Ø¬Ø¯Ø§Ù‹ Ù…Ø¬Ø§Ù„ <strong class="text-primary">Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØ§Ù„Ø§Ø®ØªØ±Ø§Ù‚ Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠ</strong>ØŒ ÙˆØ¨Ø´ÙˆÙ ÙÙŠ ÙƒÙ„ Ø³Ø·Ø± ÙƒÙˆØ¯ ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯ ÙˆÙØ±ØµØ© Ø¹Ø´Ø§Ù† Ø£ØªØ¹Ù„Ù… Ø­Ø§Ø¬Ø© Ù…Ù…ÙŠØ²Ø©. 
                           Ù‡Ø¯ÙÙŠ Ø¥Ù†ÙŠ Ø£ÙƒÙˆÙ† Ù…Ø·ÙˆØ± Ù…Ø­ØªØ±Ù Ù‚Ø§Ø¯Ø± Ø¹Ù„Ù‰ Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚Ø§Øª ÙˆÙ…ÙˆØ§Ù‚Ø¹ ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ ÙˆØªØ­Ù„ Ù…Ø´Ø§ÙƒÙ„ Ø­Ù‚ÙŠÙ‚ÙŠØ©.
                       </p>
                       
                       <h4 class="text-xl font-bold mb-4">Ù…Ø¬Ø§Ù„Ø§Øª ØªØ®ØµØµÙŠ:</h4>
                       <div class="flex flex-wrap gap-2 mb-6">
                           <span class="skill-tag">ØªØ·ÙˆÙŠØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©</span>
                           <span class="skill-tag">React & Next.js</span>
                           <span class="skill-tag">ØªØµÙ…ÙŠÙ… UI/UX</span>
                           <span class="skill-tag">Ø§Ù„Ø§Ø®ØªØ±Ø§Ù‚ Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠ</span>
                           <span class="skill-tag">Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ø£Ù…Ø§Ù†</span>
                           <span class="skill-tag">JavaScript</span>
                           <span class="skill-tag">HTML & CSS</span>
                           <span class="skill-tag">ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹</span>
                       </div>
                       
                       <div class="achievement-item">
                           <div class="achievement-icon">
                               <i class="fas fa-heart"></i>
                           </div>
                           <div>
                               <h4 class="font-bold">ÙÙ„Ø³ÙØªÙŠ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„</h4>
                               <p class="text-text-secondary-color">Ø£Ø¤Ù…Ù† Ø¨Ø£Ù† Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† ÙÙŠ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ØŒ ÙˆØ£Ù† ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹ Ù‡Ùˆ ÙØ±ØµØ© Ù„ØªØ¹Ù„Ù… Ø´ÙŠØ¡ Ø¬Ø¯ÙŠØ¯ ÙˆØ¥Ø¶Ø§ÙØ© Ù‚ÙŠÙ…Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©.</p>
                           </div>
                       </div>
                   </div>
               </div>
               
               <!-- Vision & Goals Section -->
               <div class="mt-16">
                   <div class="about-card reveal" data-delay="0.4">
                       <div class="text-center mb-8">
                           <div class="achievement-icon mx-auto mb-4">
                               <i class="fas fa-rocket"></i>
                           </div>
                           <h3 class="text-3xl font-bold text-primary">Ø±Ø¤ÙŠØªÙŠ Ù„Ù„Ù…Ø³ØªÙ‚Ø¨Ù„</h3>
                       </div>
                       
                       <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                           <div class="text-center">
                               <div class="achievement-icon mx-auto mb-4">
                                   <i class="fas fa-lightbulb"></i>
                               </div>
                               <h4 class="text-xl font-bold mb-2">Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ ÙˆØ§Ù„Ø§Ø¨ØªÙƒØ§Ø±</h4>
                               <p class="text-text-secondary-color">Ø£Ø³Ø¹Ù‰ Ù„ØªØ·ÙˆÙŠØ± Ø­Ù„ÙˆÙ„ Ù…Ø¨ØªÙƒØ±Ø© ØªØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø¬Ù…Ø§Ù„ ÙˆØ§Ù„ÙˆØ¸ÙŠÙØ©ØŒ ÙˆØªÙ‚Ø¯Ù… ØªØ¬Ø±Ø¨Ø© Ù…Ø³ØªØ®Ø¯Ù… Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ©.</p>
                           </div>
                           
                           <div class="text-center">
                               <div class="achievement-icon mx-auto mb-4">
                                   <i class="fas fa-shield-alt"></i>
                               </div>
                               <h4 class="text-xl font-bold mb-2">Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø­Ù…Ø§ÙŠØ©</h4>
                               <p class="text-text-secondary-color">Ø£Ù‡ØªÙ… Ø¨ØªØ·Ø¨ÙŠÙ‚ Ø£Ø¹Ù„Ù‰ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø£Ù…Ø§Ù† ÙÙŠ ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹ØŒ Ù„Ø¶Ù…Ø§Ù† Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©.</p>
                           </div>
                           
                           <div class="text-center">
                               <div class="achievement-icon mx-auto mb-4">
                                   <i class="fas fa-users"></i>
                               </div>
                               <h4 class="text-xl font-bold mb-2">Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø¬ØªÙ…Ø¹</h4>
                               <p class="text-text-secondary-color">Ø£Ø¤Ù…Ù† Ø¨Ù‚ÙˆØ© Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ ÙÙŠ ØªØ­Ø³ÙŠÙ† Ø­ÙŠØ§Ø© Ø§Ù„Ù†Ø§Ø³ ÙˆØ­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙÙŠ Ù…Ø¬ØªÙ…Ø¹Ù†Ø§.</p>
                           </div>
                       </div>
                   </div>
               </div>
           </div>
       </section>
       
       <section id="services" class="py-24 bg-secondary">
           <div class="container mx-auto px-6">
               <div class="text-center mb-16"> <h2 class="text-4xl font-bold g-title" data-text="Ù…Ø§Ø°Ø§ Ø£Ù‚Ø¯Ù…ØŸ"></h2> </div>
               <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
           </div>
       </section>
       
       <section id="contact" class="py-24 bg-color">
            <div class="container mx-auto px-6 text-center">
                <div class="text-center mb-12">
                   <h2 class="text-4xl font-bold g-title" data-text="Ù‡Ù„ Ù„Ø¯ÙŠÙƒ ÙÙƒØ±Ø©ØŸ"></h2>
                   <p class="text-lg text-text-secondary-color mt-4 reveal" data-delay="0.2">Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©. ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙŠ ÙˆØ¯Ø¹Ù†Ø§ Ù†Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ù…Ù„!</p>
               </div>
               <div class="flex flex-col items-center gap-6 reveal" data-delay="0.4">
                   <a href="mailto:omarfergany100@gmail.com" class="bg-primary text-white font-bold text-xl py-4 px-10 rounded-lg hover:bg-primary-hover transition-all duration-300 transform hover:scale-105 inline-block">
                       <i class="fas fa-paper-plane ml-2"></i> omarfergany100@gmail.com
                   </a>
                   <div class="flex justify-center space-x-6 space-x-reverse">
                       <a href="https://www.facebook.com/share/14DMwBB4TVV/" target="_blank" class="magnetic-icon text-text-secondary-color hover:text-blue-600 transition-all duration-300 transform hover:scale-125"><i class="fab fa-facebook fa-2x"></i></a>
                       <a href="https://www.instagram.com/fergany___x" target="_blank" class="magnetic-icon text-text-secondary-color hover:text-pink-500 transition-all duration-300 transform hover:scale-125"><i class="fab fa-instagram fa-2x"></i></a>
                       <a href="https://wa.me/201225860308" target="_blank" class="magnetic-icon text-text-secondary-color hover:text-green-500 transition-all duration-300 transform hover:scale-125"><i class="fab fa-whatsapp fa-2x"></i></a>
                   </div>
               </div>
            </div>
       </section>
   </main>
   
   <footer class="bg-gray-900 text-gray-400 py-6"><div class="container mx-auto px-6 text-center"><p>Â© 2024 | ØµÙÙ†Ø¹ Ø¨Ø­Ø¨ ÙˆØ´ØºÙ Ø¨ÙˆØ§Ø³Ø·Ø© <span class="font-bold text-primary">Ø¹Ù…Ø± Ø¹Ø·ÙŠÙ‡ Ø§Ù„ÙØ±Ø¬Ø§Ù†Ù‰</span></p></div></footer>
   
   <div id="chat-widget">
       <div id="chat-window">
           <div class="chat-header">
               <h3>
                   <i class="fas fa-robot"></i>
                   Ù…Ø³Ø§Ø¹Ø¯ Ø¹Ù…Ø± Ø§Ù„Ø±Ù‚Ù…ÙŠ
               </h3>
               <div class="chat-status">
                   <div class="status-indicator"></div>
                   Ù…ØªØµÙ„ ÙˆÙ…Ø³ØªØ¹Ø¯ Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
               </div>
           </div>
           <div id="chat-messages"></div>
           <div id="chat-quick-replies"></div>
           <div id="chat-input-wrapper">
               <input id="chat-input" type="text" placeholder="Ø§Ø³Ø£Ù„ Ø£ÙŠ Ø­Ø§Ø¬Ø©..." autocomplete="off">
               <button id="chat-send-btn"><i class="fas fa-paper-plane"></i></button>
           </div>
       </div>
       <div id="chat-bubble">
           <div class="ai-icon-container">
               <div class="ai-brain"></div>
               <div class="neural-network">
                   <div class="neural-dot"></div>
                   <div class="neural-dot"></div>
                   <div class="neural-dot"></div>
                   <div class="neural-dot"></div>
                   <div class="neural-dot"></div>
               </div>
           </div>
       </div>
   </div>
   
<script>
document.addEventListener('DOMContentLoaded', () => {
   // This script is responsible for all the dynamic functionality of the website.
   const docHtml = document.documentElement;

   // --- Smart & Professional Preloader ---
   const preloader = document.getElementById('preloader');
   if (preloader) {
       const textEl = document.getElementById('preloader-text');
       const progressBar = document.getElementById('preloader-progress-bar');
       const statusEl = document.getElementById('preloader-status');
       const particlesContainer = document.getElementById('preloader-particles');
       const welcomeText = "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ÙˆÙ‚Ø¹ Ø¹Ù…Ø± Ø§Ù„ÙØ±Ø¬Ø§Ù†Ù‰";

       // Create animated particles
       const createParticles = () => {
           if (!particlesContainer) return;
           for (let i = 0; i < 50; i++) {
               const particle = document.createElement('div');
               particle.className = 'particle';
               particle.style.left = Math.random() * 100 + '%';
               particle.style.top = Math.random() * 100 + '%';
               particle.style.width = Math.random() * 4 + 2 + 'px';
               particle.style.height = particle.style.width;
               particle.style.animationDelay = Math.random() * 6 + 's';
               particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
               particlesContainer.appendChild(particle);
           }
       };

       // MODIFICATION: Set text content directly and animate the whole block
       if(textEl) {
          textEl.textContent = welcomeText;
          gsap.to(textEl, {
              opacity: 1,
              y: 0,
              duration: 1,
              ease: 'power3.out',
              delay: 0.5 // Start animation after half a second
          });
       }
       
       // Progress simulation
       let progress = 0;
       const statusMessages = [
           'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...',
           'ØªØ­Ø¶ÙŠØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©...',
           'ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰...',
           'ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØµÙ…ÙŠÙ…...',
           'ØªØ¬Ù‡ÙŠØ² Ø§Ù„ØªÙØ§Ø¹Ù„Ø§Øª...',
           'Ø§ÙƒØªÙ…Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„!'
       ];

       const updateProgress = () => {
           if (progress < 100) {
               // Make progress increment more consistent to look smoother over the fixed duration
               progress += 2;
               if (progress > 100) progress = 100;
               
               if(progressBar) progressBar.style.width = progress + '%';
               
               const statusIndex = Math.floor((progress / 100) * (statusMessages.length - 1));
               if(statusEl) statusEl.textContent = statusMessages[statusIndex];

               // Call next update
               setTimeout(updateProgress, 100); // Update every 100ms
           }
       };

       // Function to hide the preloader
       const hidePreloader = () => {
           gsap.to(preloader, {
               opacity: 0,
               duration: 1,
               ease: 'power2.inOut',
               onComplete: () => {
                   preloader.classList.add('loaded');
               }
           });
       };

       // Initialize preloader
       createParticles();
       setTimeout(updateProgress, 500); // Start progress after a short delay

       // MODIFICATION: Hide preloader after a fixed 6 seconds
       setTimeout(hidePreloader, 6000);
   }

   // --- Header Features ---
   const scrollProgressBar = document.getElementById('scroll-progress-bar');

   function updateHeader() {
       if (scrollProgressBar) {
           const scrollTotal = docHtml.scrollHeight - docHtml.clientHeight;
           scrollProgressBar.style.width = `${(window.scrollY / scrollTotal) * 100}%`;
       }
   }
   window.addEventListener('scroll', updateHeader);
   updateHeader();

   // --- Theme Switcher ---
   const themeCheckbox = document.getElementById('theme-checkbox');
   function applyTheme(theme) {
       docHtml.classList.remove('light', 'dark');
       docHtml.classList.add(theme);
       localStorage.setItem('theme', theme);
   }
   const currentTheme = localStorage.getItem('theme') || 'light';
   applyTheme(currentTheme);
   if(themeCheckbox) {
       if (currentTheme === 'dark') themeCheckbox.checked = true;
       
       themeCheckbox.addEventListener('change', () => {
           applyTheme(themeCheckbox.checked ? 'dark' : 'light');
       });
   }

   // --- GSAP Word Animation Fix ---
   gsap.registerPlugin(ScrollTrigger);
   document.querySelectorAll(".g-title").forEach(title => {
       if(title.dataset.text) {
           const words = title.dataset.text.split(/(\s|,|\?)/);
           title.textContent = "";
           words.forEach(word => {
               if (word.trim().length > 0) {
                   const span = document.createElement("span");
                   span.className = "word";
                   span.textContent = word;
                   title.appendChild(span);
               } else {
                    title.appendChild(document.createTextNode(word));
               }
           });
           gsap.from(title.querySelectorAll(".word"), {
               y: '115%', stagger: 0.1, duration: 0.5, ease: 'power3.out',
               scrollTrigger: { trigger: title, start: "top 90%", toggleActions: "play none none none" }
           });
       }
   });

   // --- Service Cards ---
   const services = [
       { icon: 'fa-laptop-code', title: 'ØªØ·ÙˆÙŠØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª', desc: 'Ø¨Ù†Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø§Øª ÙˆÙŠØ¨ ØªÙØ§Ø¹Ù„ÙŠØ© ÙˆØ³Ø±ÙŠØ¹Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø­Ø¯Ø« Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø²ÙŠ React Ùˆ Next.js.' },
       { icon: 'fa-palette', title: 'ØªØµÙ…ÙŠÙ… UI/UX', desc: 'ØªØµÙ…ÙŠÙ… ØªØ¬Ø§Ø±Ø¨ Ù…Ø³ØªØ®Ø¯Ù… Ø³Ù‡Ù„Ø© ÙˆØ¬Ø°Ø§Ø¨Ø© Ø¨ØªØ±ÙƒØ² Ø¹Ù„Ù‰ ØªØ­Ù‚ÙŠÙ‚ Ø£Ù‡Ø¯Ø§ÙÙƒ ÙˆØ±Ø¶Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†.' },
       { icon: 'fa-user-shield', title: 'Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ø£Ù…Ø§Ù†', desc: 'ØªØ·Ø¨ÙŠÙ‚ Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ø­Ù…Ø§ÙŠØ© Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ÙˆÙŠØ¨ØŒ ÙƒØ¬Ø²Ø¡ Ù…Ù† Ø´ØºÙÙ‡ Ø¨Ù…Ø¬Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ±Ø§Ù‚.' }
   ];
   const servicesContainer = document.querySelector('#services .grid');
   if (servicesContainer) {
       servicesContainer.innerHTML = services.map((service, index) => `
           <div class="bg-secondary p-8 rounded-lg shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-2 reveal" data-delay="${index * 0.2}">
               <i class="fas ${service.icon} fa-3x text-primary mb-4"></i>
               <h3 class="text-2xl font-bold mb-2">${service.title}</h3>
               <p class="text-text-secondary-color">${service.desc}</p>
           </div>
       `).join('');
   }
   
   // --- Nav & Mobile Menu Logic ---
   const mobileMenuButton = document.getElementById('mobile-menu-button');
   const mobileMenu = document.getElementById('mobile-menu');
   if(mobileMenuButton && mobileMenu) {
       mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
   }
   document.querySelectorAll('.nav-link-mobile, .nav-link').forEach(link => {
       link.addEventListener('click', (e) => {
           if(link.classList.contains('nav-link-mobile') && mobileMenu) {
               mobileMenu.classList.add('hidden');
           }
           const targetId = link.getAttribute('href');
           if(targetId && document.querySelector(targetId)) {
              e.preventDefault();
              document.querySelector(targetId).scrollIntoView({ behavior: 'smooth' });
           }
       });
   });

   const navLinks = document.querySelectorAll('#main-nav .nav-link');
   const pageSections = document.querySelectorAll('main section');
   function updateActiveLink() {
       let current = '';
       if (pageSections.length > 0) {
           current = pageSections[0].id;
       }
       pageSections.forEach(section => {
           if (section && window.scrollY >= section.offsetTop - 150) {
               current = section.id;
           }
       });
       navLinks.forEach(link => {
           link.classList.remove('nav-active');
           if (link.getAttribute('href') === '#' + current) {
               link.classList.add('nav-active');
           }
       });
   }
   window.addEventListener('scroll', updateActiveLink);
   updateActiveLink();

   // --- Gemini AI Chatbot ---
   const chatWidget = {
       bubble: document.getElementById('chat-bubble'),
       window: document.getElementById('chat-window'),
       messages: document.getElementById('chat-messages'),
       input: document.getElementById('chat-input'),
       sendBtn: document.getElementById('chat-send-btn'),
       quickReplies: document.getElementById('chat-quick-replies'),
       apiKey: 'AIzaSyD39lIpfEjoPYM6NcOxWtM3pQym9ZrkXfo', // User's Gemini API Key
       history: [], // To maintain conversation context

       init() {
           if (!this.bubble || !this.window || !this.sendBtn || !this.input) return;
           this.bubble.addEventListener('click', () => this.toggle());
           this.sendBtn.addEventListener('click', () => this.sendMessage());
           this.input.addEventListener('keypress', (e) => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); this.sendMessage(); } });
       },
       toggle() { 
           this.window.classList.toggle('open');
           if(this.window.classList.contains('open') && this.messages.children.length === 0) {
                this.addMessage("Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙŠÙƒ ÙŠØ§ ØºØ§Ù„ÙŠ! Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ Ø¹Ù…Ø± Ø§Ù„Ø±Ù‚Ù…ÙŠØŒ Ø®Ø¯ Ø±Ø§Ø­ØªÙƒ ÙˆØ§Ø³Ø£Ù„ ÙÙŠ Ø£ÙŠ Ø­Ø§Ø¬Ø© ØªØ®Ø·Ø± Ø¹Ù„Ù‰ Ø¨Ø§Ù„Ùƒ. ğŸ˜‰", 'ai');
                this.showQuickReplies(["Ù…ÙŠÙ† Ø¹Ù…Ø±ØŸ ğŸ¤”", "Ø¥ÙŠÙ‡ Ø®Ø¯Ù…Ø§ØªÙ‡ØŸ ğŸ‘¨â€ğŸ’»", "Ø¥ÙŠÙ‡ Ù‡ÙŠ Ù…Ù‡Ø§Ø±Ø§Øª Ø¹Ù…Ø±ØŸ ğŸ› ï¸", "Ø¥Ø²Ø§ÙŠ Ø£ØªÙˆØ§ØµÙ„ Ù…Ø¹Ø§Ù‡ØŸ ğŸ“"]);
           }
       },
       sendMessage() {
           const userMessage = this.input.value.trim();
           if (!userMessage) return;
           this.addMessage(userMessage, 'user');
           this.input.value = '';
           this.quickReplies.innerHTML = '';
           this.getAIResponse(userMessage);
       },
       sendQuickReply(text) {
           this.addMessage(text, 'user');
           this.quickReplies.innerHTML = '';
           this.getAIResponse(text);
       },
       addMessage(content, type) {
           const div = document.createElement('div');
           div.className = `message ${type}`;
           if (type === 'ai') {
               const avatar = `<div class="ai-avatar"><i class="fas fa-robot"></i></div>`;
               // Use marked.parse to render Markdown content
               const textContent = `<div>${marked.parse(content)}</div>`;
               div.innerHTML = avatar + textContent;
           } else {
               div.textContent = content;
           }
           this.messages.appendChild(div);
           this.messages.scrollTop = this.messages.scrollHeight;
       },
       showQuickReplies(replies) {
           this.quickReplies.innerHTML = '';
           replies.forEach(text => {
               const btn = document.createElement('button');
               btn.className = 'quick-reply-btn';
               btn.textContent = text;
               btn.onclick = () => this.sendQuickReply(text);
               this.quickReplies.appendChild(btn);
           });
       },
       
       async getAIResponse(prompt) {
           const loadingDiv = document.createElement('div');
           loadingDiv.className = 'message ai';
           loadingDiv.innerHTML = `<div class="ai-avatar"><i class="fas fa-robot"></i></div><div><span class="animate-pulse">Ø¨Ø¬Ù…Ø¹Ù„Ùƒ Ø§Ù„Ø±Ø¯... ğŸ¤”</span></div>`;
           this.messages.appendChild(loadingDiv);
           this.messages.scrollTop = this.messages.scrollHeight;

           // UPDATED System Prompt with all necessary information
           const systemPrompt = `Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø´Ø®ØµÙŠ Ù„Ù…Ø·ÙˆØ± ÙˆÙŠØ¨ Ø§Ø³Ù…Ù‡ Ø¹Ù…Ø± Ø¹Ø·ÙŠÙ‡ Ø§Ù„ÙØ±Ø¬Ø§Ù†Ù‰. Ø§Ø³Ù…Ùƒ 'Ù…Ø³Ø§Ø¹Ø¯ Ø¹Ù…Ø± Ø§Ù„Ø±Ù‚Ù…ÙŠ'. Ø±Ø¯ÙˆØ¯Ùƒ ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¨Ø§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ù…ØµØ±ÙŠØ© Ø§Ù„Ø¹Ø§Ù…ÙŠØ©ØŒ ÙˆØ¯ÙˆØ¯Ø©ØŒ ÙˆÙ…Ø±Ø­Ø©ØŒ ÙˆÙ…ÙÙŠØ¯Ø©.

           **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ© Ø¹Ù† Ø¹Ù…Ø± Ù„Ø§Ø²Ù… ØªØ³ØªØ®Ø¯Ù…Ù‡Ø§ Ù„Ù…Ø§ Ø­Ø¯ ÙŠØ³Ø£Ù„:**
           - **Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:** Ø¹Ù…Ø± Ø¹Ø·ÙŠÙ‡ Ø§Ù„ÙØ±Ø¬Ø§Ù†Ù‰.
           - **ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯:** 30 Ù…Ø§ÙŠÙˆ 2008 (30/5/2008).
           - **Ø§Ù„Ø¹Ù…Ø±:** 17 Ø³Ù†Ø© (Ù‡Ùˆ Ø­Ø§Ù„ÙŠØ§Ù‹ ÙÙŠ ØªØ§Ù„ØªØ© Ø«Ø§Ù†ÙˆÙŠ).
           - **Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯:** Ù‚Ø±ÙŠØ© Ø§Ù„Ù…Ù„Ø§ÙƒØŒ Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ¯ ÙÙŠ Ø¹Ø²Ø¨Ø© Ø§Ù„ÙØ±Ø¬Ø§Ù†Ù‰.
           - **Ø§Ù„Ø´ØºÙ ÙˆØ§Ù„Ù…Ù‡Ø§Ø±Ø§Øª:** Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ Ø§Ù„Ø§Ø®ØªØ±Ø§Ù‚ Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠØŒ ØªØ·ÙˆÙŠØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© (React, Next.js)ØŒ ØªØµÙ…ÙŠÙ… UI/UXØŒ ÙˆØ£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ø£Ù…Ø§Ù†.

           **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø¹Ù…Ø± (Ø§Ø³ØªØ®Ø¯Ù…Ù‡Ø§ ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù† ÙƒÙŠÙÙŠØ© Ø§Ù„ØªÙˆØ§ØµÙ„):**
           - **Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„:** omarfergany100@gmail.com
           - **ÙÙŠØ³Ø¨ÙˆÙƒ:** https://www.facebook.com/share/14DMwBB4TVV/
           - **Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…:** https://www.instagram.com/fergany___x
           - **ÙˆØ§ØªØ³Ø§Ø¨:** https://wa.me/201225860308

           **ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù…Ù‡Ù…Ø© Ù„ÙŠÙƒ:**
           1. Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ù…ØµØ±ÙŠØ© Ø§Ù„Ø¹Ø§Ù…ÙŠØ© ÙˆØ®Ù„ÙŠÙƒ ÙˆØ¯ÙˆØ¯.
           2. Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØ² ÙƒØªÙŠØ± Ø¹Ø´Ø§Ù† ØªØ®Ù„ÙŠ Ø§Ù„ÙƒÙ„Ø§Ù… Ù…Ù…ØªØ¹.
           3. Ù…Ø§ØªÙ‚ÙˆÙ„Ø´ Ø£Ø¨Ø¯Ø§Ù‹ Ø¥Ù†Ùƒ Ù†Ù…ÙˆØ°Ø¬ Ù„ØºÙˆÙŠ Ø£Ùˆ ØªØ°ÙƒØ± Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù„ÙŠ Ø¹Ù…Ù„ØªÙƒ.
           4. Ø¬Ø§ÙˆØ¨ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¯ÙŠ. Ù„Ùˆ Ø³ÙØ¦Ù„Øª Ø¹Ù† Ø­Ø§Ø¬Ø© Ù…Ø´ Ù…Ø°ÙƒÙˆØ±Ø©ØŒ Ø­Ø§ÙˆÙ„ ØªÙƒÙˆÙ† Ù…Ø¨Ø¯Ø¹ ÙÙŠ Ø±Ø¯Ùƒ Ø£Ùˆ Ù‚ÙˆÙ„ Ø¥Ù† Ø¯ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø© Ø¹Ù†Ø¯ Ø¹Ù…Ø± Ù†ÙØ³Ù‡.`;

           // Add user message to history
           this.history.push({ role: "user", parts: [{ text: prompt }] });

           const payload = {
               contents: [
                   { role: "model", parts: [{ text: systemPrompt }] },
                   ...this.history
               ]
           };

           try {
               const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${this.apiKey}`, {
                   method: 'POST',
                   headers: { 'Content-Type': 'application/json' },
                   body: JSON.stringify(payload)
               });

               if (!response.ok) {
                   const errorBody = await response.text();
                   throw new Error(`API request failed with status ${response.status}: ${errorBody}`);
               }

               const data = await response.json();
               
               this.messages.removeChild(loadingDiv);
               
               if (data.candidates && data.candidates.length > 0 && data.candidates[0].content && data.candidates[0].content.parts) {
                   const aiText = data.candidates[0].content.parts[0].text;
                   this.addMessage(aiText, 'ai');
                   // Add AI response to history
                   this.history.push({ role: "model", parts: [{ text: aiText }] });
               } else {
                   console.log("No valid response from API:", data);
                   this.addMessage("Ù…Ø¹Ù„Ø´ØŒ Ø´ÙƒÙ„ÙŠ Ø³Ø±Ø­Øª Ø´ÙˆÙŠØ©. Ù…Ù…ÙƒÙ† ØªØ³Ø£Ù„ ØªØ§Ù†ÙŠØŸ", 'ai');
               }

           } catch (error) {
               console.error("Gemini API Error:", error);
               this.messages.removeChild(loadingDiv);
               this.addMessage("Ø¹ÙÙˆØ§Ù‹ØŒ Ø­ØµÙ„ Ø®Ø·Ø£ ÙÙ†ÙŠ ÙˆÙ…Ø´ Ù‚Ø§Ø¯Ø± Ø£Ø±Ø¯ Ø¹Ù„ÙŠÙƒ Ø¯Ù„ÙˆÙ‚ØªÙŠ. ğŸ”Œ Ù…Ù…ÙƒÙ† ØªÙƒÙˆÙ† Ù…ÙØªØ§Ø­ Ø§Ù„Ù€ API ÙÙŠÙ‡ Ù…Ø´ÙƒÙ„Ø©. Ø¬Ø±Ø¨ ØªØ§Ù†ÙŠ ÙƒÙ…Ø§Ù† Ø´ÙˆÙŠØ©.", 'ai');
           } finally {
               // Keep history trimmed to a reasonable length
               if (this.history.length > 10) {
                   this.history = this.history.slice(-10);
               }
           }
       }
   };
   chatWidget.init();
   
   // --- 3D Background ---
   try {
       const bgCanvas = document.getElementById('bg-canvas');
       if (bgCanvas) {
           let scene = new THREE.Scene();
           let camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
           let renderer = new THREE.WebGLRenderer({ canvas: bgCanvas, alpha: true });
           renderer.setSize(window.innerWidth, window.innerHeight);
           let stars = [];
           for (let i = 0; i < 1000; i++) {
               let star = new THREE.Vector3(
                   THREE.MathUtils.randFloatSpread(2000),
                   THREE.MathUtils.randFloatSpread(2000),
                   THREE.MathUtils.randFloatSpread(2000)
               );
               stars.push(star);
           }
           let starGeo = new THREE.BufferGeometry().setFromPoints(stars);
           let starMat = new THREE.PointsMaterial({ color: 0xaaaaaa, size: 0.7 });
           let starField = new THREE.Points(starGeo, starMat);
           scene.add(starField);
           camera.position.z = 1;
           function animate() {
               requestAnimationFrame(animate);
               starField.rotation.y += 0.0002;
               renderer.render(scene, camera);
           }
           animate();
           window.addEventListener('resize', () => {
               camera.aspect = window.innerWidth / window.innerHeight;
               camera.updateProjectionMatrix();
               renderer.setSize(window.innerWidth, window.innerHeight);
           });
       }
   } catch(e) {
       console.error("Three.js background failed to load.", e);
   }

   // --- Reveal Animation ---
   const revealElements = document.querySelectorAll('.reveal');
   const revealObserver = new IntersectionObserver((entries) => {
       entries.forEach(entry => {
           if (entry.isIntersecting) {
               const delay = entry.target.dataset.delay || 0;
               setTimeout(() => {
                   entry.target.style.opacity = '1';
                   entry.target.style.transform = 'translateY(0)';
               }, delay * 1000);
               revealObserver.unobserve(entry.target);
           }
       });
   }, { threshold: 0.1 });

   revealElements.forEach(el => {
       el.style.opacity = '0';
       el.style.transform = 'translateY(30px)';
       el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
       revealObserver.observe(el);
   });
});
</script>
</body>
</html>